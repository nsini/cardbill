(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"7gw5":function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var l=i(a("Vl3Y"));a("IzEo");var r=i(a("bx4M")),u=i(a("2Taf")),o=i(a("vZ4D")),d=i(a("l4Ni")),s=i(a("ujKo")),c=i(a("MhPg")),f=n(a("q1tI")),v=a("y1Nh"),p=a("MuoO"),g=i(a("BQy7")),h=function(e,t,a,n){var i,l=arguments.length,r=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(l<3?i(r):l>3?i(t,a,r):i(t,a))||r);return l>3&&r&&Object.defineProperty(t,a,r),r},y=function(e){function t(){var e;return(0,u.default)(this,t),e=(0,d.default)(this,(0,s.default)(t).apply(this,arguments)),e.state={width:"100%"},e.resizeFooterToolbar=function(){requestAnimationFrame(function(){var t=document.querySelectorAll(".ant-layout-sider")[0];if(t){var a="calc(100% - ".concat(t.style.width,")"),n=e.state.width;n!==a&&e.setState({width:a})}})},e.onAddBusiness=function(t){var a=e.props.dispatch;a({type:"business/addBusiness",payload:t})},e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar,{passive:!0});var e=this.props.dispatch;e({type:"business/list"})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this.props,t=e.business.list,a=e.form.getFieldDecorator;return f.default.createElement("div",null,f.default.createElement(v.PageHeaderWrapper,{content:"\u968f\u65f6\u968f\u5730\u67e5\u770b\u5546\u6237\u4fe1\u606f\u3002"},f.default.createElement(r.default,{title:"\u5546\u6237",bordered:!1},a("business",{initialValue:t})(f.default.createElement(g.default,{onChange:this.onAddBusiness})))))}}]),t}(f.Component);y=h([(0,p.connect)(function(e){var t=e.business,a=e.loading;return{business:t,submitting:a.effects["business/list"]}})],y);var m=l.default.create()(y);t.default=m},BQy7:function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=i(a("wCAj"));a("+L6B");var r=i(a("2/Rp"));a("giR+");var u=i(a("fyUT"));a("5NDa");var o=i(a("5rEg"));a("miYZ");var d=i(a("tsqr")),s=i(a("gWZ8")),c=i(a("p0pE")),f=i(a("2Taf")),v=i(a("vZ4D")),p=i(a("l4Ni")),g=i(a("ujKo")),h=i(a("MhPg")),y=n(a("q1tI")),m=i(a("XaGS")),b=function(e){function t(e){var a;return(0,f.default)(this,t),a=(0,p.default)(this,(0,g.default)(t).call(this,e)),a.clickedCancel=!1,a.index=0,a.cacheOriginData={},a.toggleEditable=function(e,t){e.preventDefault();var n=a.state.data,i=void 0===n?[]:n,l=i.map(function(e){return(0,c.default)({},e)}),r=a.getRowByKey(t,l);r&&(r.editable||(a.cacheOriginData[t]=(0,c.default)({},r)),r.editable=!r.editable,a.setState({data:[]}))},a.newRecord=function(){var e=a.state.data,t=void 0===e?[]:e,n=t.map(function(e){return(0,c.default)({},e)});a.props.onLoadBanks;n.push({id:a.index,isNew:!0,editable:!0}),a.index+=1,a.setState({data:n})},a.onChangeData=function(e,t,n){var i=a.state.data,l=void 0===i?[]:i,r=(0,s.default)(l),u=a.getRowByKey(n,r);u&&(u[t]=e,a.setState({data:r}))},a.state={data:e.value,loading:!1,value:e.value},a}return(0,h.default)(t,e),(0,v.default)(t,[{key:"getRowByKey",value:function(e,t){var a=this.state.data,n=void 0===a?[]:a;return(t||n).filter(function(t){return t.id===e})[0]}},{key:"handleFieldChange",value:function(e,t,a){var n=this.state.data,i=void 0===n?[]:n,l=(0,s.default)(i),r=this.getRowByKey(a,l);r&&(r[t]=e.target.value,this.setState({data:l}))}},{key:"saveRow",value:function(e,t){var a=this;e.persist(),this.setState({loading:!0}),setTimeout(function(){if(a.clickedCancel)a.clickedCancel=!1;else{var n=a.getRowByKey(t)||{};if(console.log(n),!n.business_name||!n.code)return d.default.error("\u8bf7\u586b\u5199\u5b8c\u6574\u6210\u5458\u4fe1\u606f\u3002"),e.target.focus(),void a.setState({loading:!1});delete n.isNew,a.toggleEditable(e,t);a.state.data;var i=a.props.onChange;i&&i([n]),a.setState({loading:!1,data:[]})}},500)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.data,i=[{title:"\u540d\u79f0",dataIndex:"business_name",key:"business_name",render:function(t,a){return a.editable?y.default.createElement(o.default,{onChange:function(t){return e.handleFieldChange(t,"business_name",a.id)},placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"}):t}},{title:"MCC",dataIndex:"code",key:"code",render:function(t,a){return a.editable?y.default.createElement(u.default,{min:1e3,max:9999,onChange:function(t){return e.onChangeData(t,"code",a.id)},placeholder:"\u8bf7\u8f93\u5165MCC"}):t}},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){var n=e.state.loading;return a.editable&&n?null:a.editable&&a.isNew?y.default.createElement("span",null,y.default.createElement("a",{onClick:function(t){return e.saveRow(t,a.id)}},"\u6dfb\u52a0")):y.default.createElement("span",null)}}];return y.default.createElement(y.Fragment,null,y.default.createElement(r.default,{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:this.newRecord,icon:"plus"},"\u65b0\u589e\u5546\u6237\u7c7b\u578b"),y.default.createElement(l.default,{loading:a,columns:i,dataSource:n||[],pagination:!1}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,m.default)(e.value,t.value)?null:{data:e.value,value:e.value}}}]),t}(y.PureComponent),w=b;t.default=w}}]);